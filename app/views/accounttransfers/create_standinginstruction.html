<div ng-controller="CreateStandingInstructionController">
    <div>
        <ul class="breadcrumb">
            <li><a href="#/viewclient/{{standinginstruction.fromClient.id}}">{{standinginstruction.fromClient.displayName}}</a> <span class="divider">/</span></li>
            <li class="active">{{'label.anchor.standinginstruction' | translate}}</li>
        </ul>
    </div>
    <api-validate></api-validate>
    <form class="form-horizontal well" name="standinginstructionform" novalidate="" rc-submit="submit()">
        <fieldset>
            <legend>{{ 'label.heading.createstandinginstruction' | translate }}</legend>
            <div class="form-group">
                <label class="control-label col-sm-2" for="name">{{'label.heading.name' | translate}}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                    <input type="text" id="name" name="name"
                           ng-model="formData.name" required/>
                             <form-validate valattributeform="standinginstructionform" valattribute="name"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="displayName">{{'label.heading.applicant' | translate}}</label>

                <div class="col-sm-3">{{standinginstruction.fromClient.displayName}}</div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="transferType">{{'label.heading.type' | translate}}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                    <select id="transferType" ng-model="formData.transferType" name="transferType"
                        ng-options="transferType.id as transferType.value for transferType in standinginstruction.transferTypeOptions" value="{{transferType.id}}" ng-change="changeEvent()" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="transferType"/>
                </div>
            </div>
            <div class="form-group">
                <label class=" control-label col-sm-2" for="priority">{{'label.heading.priority' | translate}}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                   <select id="priority" ng-model="formData.priority" name="priority"
                        ng-options="priority.id as priority.value for priority in standinginstruction.priorityOptions" value="{{priority.id}}" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="priority"/>
                </div>
            </div>
            <div class="form-group">
                <label class=" control-label col-sm-2" for="status">{{'label.heading.status' | translate}}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                   <select id="status" ng-model="formData.status" name="status"
                        ng-options="status.id as status.value for status in standinginstruction.statusOptions" value="{{status.id}}" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="status"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="fromAccountType">{{ 'label.heading.fromaccounttype' | translate }}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                    <select id="fromAccountType" ng-model="formData.fromAccountType" name="fromAccountType"
                            ng-options="fromAccountType.id as fromAccountType.value for fromAccountType in standinginstruction.fromAccountTypeOptions"
                            ng-change="changeEvent()" value="{{fromAccountType.id}}"
                            required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="fromAccountType"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="fromAccountId">{{ 'label.heading.fromaccount' | translate }}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                    <select id="fromAccountId" ng-model="formData.fromAccountId" name="fromAccount"
                            ng-options="fromAccount.id as (fromAccount.productName+' - '+fromAccount.accountNo) for fromAccount in standinginstruction.fromAccountOptions"
                            ng-change="changeEvent()" value="{{toAccount.id}}" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="fromAccount"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="destination">{{ 'label.heading.destination' | translate }}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                    <select id="destination" ng-model="destination" name="destination"
                                    ng-options="destination.id as destination.name for destination in destinationOptions"
                                    ng-change="changedestination()" value="{{destination.id}}" required>
                                <option value="">{{'label.selectone' | translate}}</option>
                            </select>
                            <form-validate valattribute="destination"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="toOfficeId">{{ 'label.input.tooffice' | translate }}<span
                        class="required">*</span></label>

                <div class="col-sm-3" ng-show="allowclientedit">
                    <select id="toOfficeId" ng-model="formData.toOfficeId" name="toOfficeId"
                            ng-options="toOffice.id as toOffice.name for toOffice in standinginstruction.toOfficeOptions"
                            ng-change="changeEvent()" value="{{toOffice.id}}" ng-readonly="allowclientedit" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="office"/>
                </div>
                <div class="col-sm-3" ng-hide="allowclientedit">{{standinginstruction.toOffice.name}}</div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="toClientId">{{ 'label.input.toclient' | translate }}<span
                        class="required">*</span></label>

                <div class="col-sm-3" ng-show="allowclientedit">
                    <select id="toClientId" ng-model="formData.toClientId" name="client"
                            ng-options="toClient.id as toClient.displayName for toClient in standinginstruction.toClientOptions"
                            ng-change="changeEvent()" value="{{toClient.id}}" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="client"/>
                </div>
                <div class="col-sm-3" ng-hide="allowclientedit">{{standinginstruction.toClient.displayName}}</div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="toAccountType">{{ 'label.input.toaccounttype' | translate }}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                    <select id="toAccountType" ng-model="formData.toAccountType" name="account"
                            ng-options="toAccountType.id as toAccountType.value for toAccountType in standinginstruction.toAccountTypeOptions"
                            ng-change="changeEvent()" value="{{toAccountType.id}}"
                            required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="account"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="toAccountId">{{ 'label.input.toaccount' | translate }}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                    <select id="toAccountId" ng-model="formData.toAccountId" name="accountnumber"
                            ng-options="toAccount.id as (toAccount.productName+' - '+toAccount.accountNo) for toAccount in standinginstruction.toAccountOptions"
                            ng-change="changeEvent()" value="{{toAccount.id}}" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="accountnumber"/>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="instructionType">{{ 'label.input.instructiontype' | translate }}</label>

                <div class="col-sm-3">
                    <select id="instructionType" ng-model="formData.instructionType" name="instructionType"
                            ng-options="instructionType.id as (instructionType.value) for instructionType in standinginstruction.instructionTypeOptions"
                            value="{{instructionType.id}}" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="instructionType"/>
                </div>

            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="transferAmount">{{ 'label.input.amount' | translate }}</label>
                <div class="col-sm-3">
                    <input type="text" id="transferAmount" name="transferAmount" ng-model="formData.amount"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="validFrom">{{ 'label.heading.validfrom' | translate }}<span
                        class="required">*</span></label>

                <div class="col-sm-3">
                    <input type="text" id="validFrom" datepicker-pop="dd MMMM yyyy" ng-model="formData.validFrom"
                           is-open="opened" min="restrictDate" />
                </div>
                 <label class="control-label col-sm-2" for="validTill">{{ 'label.heading.to' | translate }}</label>

                <div class="col-sm-3">
                    <input type="text" id="validTill" datepicker-pop="dd MMMM yyyy" ng-model="formData.validTill"
                           is-open="opened" min="restrictDate"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="recurrenceType">{{ 'label.heading.recurrencetype' | translate }}<span
                        class="required">*</span></label>
                <div class="col-sm-3">
                    <select id="recurrenceType" ng-model="formData.recurrenceType" name="recurrenceType"
                            ng-options="recurrenceType.id as (recurrenceType.value) for recurrenceType in standinginstruction.recurrenceTypeOptions"
                            value="{{recurrenceType.id}}" required>
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                    <form-validate valattributeform="standinginstructionform" valattribute="recurrenceType"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="recurrenceInterval">{{ 'label.heading.recurrenceinterval' | translate }}</label>
                <div class="col-sm-3">
                    <input type="text" id="recurrenceInterval" name="recurrenceInterval"
                           ng-model="formData.recurrenceInterval" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="recurrenceFrequency">{{ 'label.heading.recurrencefrequency' | translate }}</label>
                <div class="col-sm-3">
                    <select id="recurrenceFrequency" ng-model="formData.recurrenceFrequency" name="recurrenceFrequency"
                            ng-options="recurrenceFrequency.id as (recurrenceFrequency.value) for recurrenceFrequency in standinginstruction.recurrenceFrequencyOptions"
                            value="{{recurrenceFrequency.id}}" >
                        <option value="">{{'label.selectone' | translate}}</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-2" for="recurrenceOnMonthDay">{{ 'label.heading.recurrenceonmonthday' | translate }}</label>
                <div class="col-sm-3">
                    <input type="text" id="recurrenceOnMonthDay" name="recurrenceOnMonthDay"
                           ng-model="recurrenceOnMonthDay" datepicker-pop="dd MMMM" 
                           is-open="opened"/>
                    
                </div>
            </div>
            <div class="col-md-offset-3">
                <a id="cancel" class="btn btn-default">{{ 'label.button.cancel' | translate }}</a>
                <button id="save" type="submit" class="btn btn-primary" has-permission='CREATE_STANDINGINSTRUCTION'>{{ 'label.button.save' | translate }}</button>
            </div>
        </fieldset>
    </form>
</div>